# 项目文件结构说明

## 一、完整目录结构

```
coco_poker/
├── assets/                          # 资源目录
│   ├── scripts/                     # 脚本目录
│   │   ├── configs/                # 配置层
│   │   │   ├── models/             # 配置数据模型
│   │   │   │   └── LevelConfig.ts # 关卡配置接口
│   │   │   └── loaders/           # 配置加载器
│   │   │       └── LevelConfigLoader.ts # 关卡配置加载器
│   │   ├── models/                 # 数据模型层
│   │   │   ├── CardModel.ts        # 卡牌数据模型
│   │   │   ├── GameModel.ts        # 游戏状态模型
│   │   │   └── UndoModel.ts        # 回退操作模型
│   │   ├── views/                  # 视图层
│   │   │   ├── CardView.ts         # 卡牌视图组件
│   │   │   ├── GameView.ts         # 游戏主视图
│   │   │   ├── PlayfieldView.ts    # 主牌区视图
│   │   │   ├── StackView.ts        # 备用牌堆视图
│   │   │   └── BaseCardView.ts     # 底牌视图
│   │   ├── controllers/            # 控制器层
│   │   │   └── GameController.ts   # 游戏主控制器
│   │   ├── managers/               # 管理器层
│   │   │   └── UndoManager.ts      # 回退管理器
│   │   ├── services/              # 服务层
│   │   │   ├── GameModelGenerator.ts # 游戏模型生成服务
│   │   │   └── CardMatchService.ts   # 卡牌匹配服务
│   │   ├── utils/                 # 工具类
│   │   │   ├── PositionHelper.ts   # 位置辅助工具
│   │   │   ├── ArrayHelper.ts      # 数组辅助工具
│   │   │   ├── Logger.ts           # 日志工具
│   │   │   └── Constants.ts       # 常量定义
│   │   ├── enums/                 # 枚举定义
│   │   │   └── CardEnums.ts        # 卡牌相关枚举
│   │   └── scenes/                # 场景脚本
│   │       └── GameScene.ts        # 游戏场景入口
│   ├── resources/                  # 资源文件目录
│   │   ├── configs/               # 配置文件
│   │   │   └── level1.json        # 关卡1配置
│   │   ├── cards/                 # 卡牌图片（需要添加）
│   │   │   ├── faces/            # 卡牌正面
│   │   │   └── card_back.png     # 卡牌背面
│   │   └── ui/                    # UI资源（可选）
│   ├── scenes/                     # 场景文件（需要创建）
│   │   └── GameScene.fire         # 游戏场景
│   └── prefabs/                    # 预制体目录（需要创建）
│       └── CardPrefab.prefab      # 卡牌预制体
├── library/                        # Cocos Creator 自动生成（Git忽略）
├── local/                          # 本地设置（Git忽略）
├── temp/                           # 临时文件（Git忽略）
├── settings/                       # 项目设置（Git忽略）
├── README.md                       # 项目说明文档
├── 开发文档.md                     # 开发文档
├── 需求梳理.md                     # 需求梳理文档
├── 快速开始.md                     # 快速开始指南
├── 资源准备指南.md                 # 资源准备指南
├── GitHub上传和演示视频指南.md     # GitHub和视频指南
├── 项目文件结构说明.md             # 本文件
├── 项目总结.md                     # 项目总结
├── package.json                    # 项目配置
├── project.json                    # Cocos Creator 项目配置
├── tsconfig.json                   # TypeScript 配置
└── .gitignore                      # Git 忽略文件
```

## 二、各目录详细说明

### 1. assets/scripts/ - 脚本目录

所有游戏逻辑代码都在此目录下，按照 MVC 架构组织。

#### configs/ - 配置层
- **models/**: 配置数据模型接口
- **loaders/**: 配置加载器，负责从文件或服务器加载配置

#### models/ - 数据模型层
- 存储游戏的所有数据
- 支持序列化和反序列化
- 不包含业务逻辑

#### views/ - 视图层
- 所有 UI 显示组件
- 负责接收用户输入
- 通过回调函数与控制器通信

#### controllers/ - 控制器层
- 协调模型和视图
- 处理业务逻辑
- 响应用户操作

#### managers/ - 管理器层
- 作为控制器的成员变量
- 可持有模型数据
- 提供全局性服务

#### services/ - 服务层
- 无状态的服务
- 不持有数据
- 提供可复用的业务逻辑

#### utils/ - 工具类
- 通用辅助功能
- 不涉及业务逻辑
- 完全独立

#### enums/ - 枚举定义
- 游戏相关的枚举类型
- 集中管理常量值

#### scenes/ - 场景脚本
- 场景入口脚本
- 初始化游戏

### 2. assets/resources/ - 资源文件目录

所有需要在运行时加载的资源文件。

#### configs/ - 配置文件
- JSON 格式的关卡配置
- 可以在运行时动态加载

#### cards/ - 卡牌图片
- **faces/**: 52 张卡牌正面图片
- **card_back.png**: 卡牌背面图片

#### ui/ - UI 资源
- 按钮图片
- 背景图片
- 其他 UI 元素

### 3. assets/scenes/ - 场景文件

Cocos Creator 的场景文件（.fire 格式）。

### 4. assets/prefabs/ - 预制体目录

可复用的节点预制体。

## 三、配置文件说明

### 1. package.json
Node.js 项目配置文件，定义项目基本信息。

### 2. project.json
Cocos Creator 项目配置文件，定义项目设置。

### 3. tsconfig.json
TypeScript 编译配置文件，定义编译选项。

### 4. .gitignore
Git 版本控制忽略文件，排除不需要版本控制的文件。

## 四、文档文件说明

### 1. README.md
项目主文档，包含项目概述、游戏规则、架构设计等。

### 2. 开发文档.md
详细的开发文档，包含操作流程、代码原理、扩展指南等。

### 3. 需求梳理.md
完整的需求梳理，详细说明所有功能需求。

### 4. 快速开始.md
快速上手指南，帮助开发者快速配置和运行项目。

### 5. 资源准备指南.md
资源准备说明，指导如何准备和配置游戏资源。

### 6. GitHub上传和演示视频指南.md
GitHub 上传和演示视频制作的详细步骤。

### 7. 项目文件结构说明.md
本文件，说明项目的文件结构。

### 8. 项目总结.md
项目完成总结，概述所有已完成的功能和文档。

## 五、需要创建的文件/目录

以下文件/目录需要在 Cocos Creator 中创建：

### 1. 场景文件
- `assets/scenes/GameScene.fire` - 游戏主场景

### 2. 预制体
- `assets/prefabs/CardPrefab.prefab` - 卡牌预制体

### 3. 资源文件
- `assets/resources/cards/` - 卡牌图片目录
- `assets/resources/ui/` - UI 资源目录（可选）

## 六、Git 忽略的文件/目录

以下文件/目录会被 Git 忽略（已在 .gitignore 中配置）：

- `library/` - Cocos Creator 自动生成的库文件
- `local/` - 本地设置文件
- `temp/` - 临时文件
- `settings/` - 项目设置文件
- `build/` - 构建输出目录
- `node_modules/` - Node.js 依赖包

## 七、文件命名规范

### 1. 脚本文件
- 类名和文件名：大写字母开头（PascalCase）
- 示例：`GameController.ts`, `CardModel.ts`

### 2. 资源文件
- 使用小写字母和下划线（snake_case）
- 示例：`card_back.png`, `button_undo_normal.png`

### 3. 配置文件
- 使用小写字母（kebab-case）
- 示例：`level1.json`, `project.json`

### 4. 文档文件
- 使用中文名称
- 示例：`开发文档.md`, `需求梳理.md`

## 八、代码组织原则

### 1. 单一职责原则
每个类只负责一个功能，保持代码简洁。

### 2. 依赖倒置原则
高层模块不依赖低层模块，都依赖抽象。

### 3. 开闭原则
对扩展开放，对修改关闭。

### 4. 接口隔离原则
使用多个专门的接口，而不是单一的总接口。

## 九、扩展新功能时的文件组织

### 添加新功能模块

1. **模型层**：在 `models/` 添加新的模型类
2. **视图层**：在 `views/` 添加新的视图组件
3. **控制器层**：在 `controllers/` 添加新的控制器
4. **服务层**：在 `services/` 添加新的服务类
5. **工具类**：在 `utils/` 添加新的工具类

### 添加新资源

1. **图片资源**：放在 `assets/resources/` 对应目录
2. **配置文件**：放在 `assets/resources/configs/`
3. **预制体**：放在 `assets/prefabs/`

## 十、维护建议

### 1. 定期整理
- 删除未使用的文件
- 整理资源文件
- 更新文档

### 2. 代码审查
- 检查代码规范
- 优化性能
- 重构冗余代码

### 3. 文档更新
- 及时更新文档
- 添加新功能的说明
- 修复文档错误

---

**提示**：保持文件结构的清晰和规范，有助于项目的长期维护和团队协作。

