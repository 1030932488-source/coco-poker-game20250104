# 快速开始指南

## 一、环境准备

### 1. 安装 Cocos Creator

1. **下载 Cocos Creator**
   - 访问 https://www.cocos.com/creator
   - 下载最新版本的 Cocos Creator（推荐 3.8.0 或更高版本）
   - 安装软件

2. **验证安装**
   - 打开 Cocos Creator
   - 确认可以正常启动

### 2. 打开项目

1. **打开项目**
   - 启动 Cocos Creator
   - 选择"打开项目"
   - 选择项目目录：`D:\coco_poker`
   - 点击"打开"

2. **等待编译**
   - Cocos Creator 会自动编译 TypeScript 代码
   - 等待编译完成（查看底部状态栏）

## 二、项目配置

### 1. 设置项目属性

1. **打开项目设置**
   - 菜单：`项目` -> `项目设置`

2. **设置设计分辨率**
   - 找到"设计分辨率"选项
   - 宽度：`1080`
   - 高度：`2080`
   - 适配模式：`固定高度（FIXED_HEIGHT）`

### 2. 创建场景

1. **创建新场景**
   - 在资源管理器中，右键点击 `assets/scenes/`
   - 选择"新建" -> "场景"
   - 命名为 `GameScene`

2. **设置场景大小**
   - 选中场景根节点
   - 在属性检查器中设置大小为 1080 x 2080

### 3. 创建节点结构

在场景中创建以下节点结构：

```
GameScene (Canvas)
├── MainCamera
├── PlayfieldArea (Node)
│   └── 主牌区容器，用于放置主牌区的卡牌
├── StackArea (Node)
│   ├── ReserveStack (Node)
│   │   └── 备用牌堆容器
│   └── BaseCardArea (Node)
│       └── 底牌区域容器
└── UILayer (Node)
    ├── UndoButton (Button)
    │   └── 回退按钮
    └── ScoreLabel (Label)
        └── 分数标签
```

### 4. 添加组件

1. **添加 GameScene 脚本**
   - 选中场景根节点
   - 在属性检查器中点击"添加组件"
   - 搜索并添加 `GameScene` 组件

2. **添加 GameController**
   - 创建一个新节点 `GameController`
   - 添加 `GameController` 组件
   - 配置各个 View 的引用：
     - `gameView`: 拖拽 `GameView` 节点
     - `playfieldView`: 拖拽 `PlayfieldView` 节点
     - `stackView`: 拖拽 `StackView` 节点
     - `baseCardView`: 拖拽 `BaseCardView` 节点

3. **添加各个 View 组件**
   - 在 `PlayfieldArea` 节点添加 `PlayfieldView` 组件
   - 在 `ReserveStack` 节点添加 `StackView` 组件
   - 在 `BaseCardArea` 节点添加 `BaseCardView` 组件
   - 在 `UILayer` 节点添加 `GameView` 组件

4. **配置 View 组件**
   - 在 `PlayfieldView` 中：
     - 拖拽卡牌预制体到 `cardPrefab` 属性
   - 在 `StackView` 中：
     - 拖拽卡牌预制体到 `cardPrefab` 属性
   - 在 `BaseCardView` 中：
     - 拖拽卡牌预制体到 `cardPrefab` 属性
   - 在 `GameView` 中：
     - 拖拽 `UndoButton` 节点到 `undoButton` 属性
     - 拖拽 `ScoreLabel` 节点到 `scoreLabel` 属性

## 三、准备资源

### 1. 创建卡牌预制体

1. **创建卡牌节点**
   - 在场景中创建一个新节点 `Card`
   - 添加 `Sprite` 组件
   - 添加 `CardView` 组件

2. **配置 CardView**
   - 在 `CardView` 组件中：
     - 拖拽 `Sprite` 组件到 `cardSprite` 属性
     - 设置 `cardBackSpriteFrame`（卡牌背面图片）
     - 设置 `cardFaceSpriteFrames` 数组（卡牌正面图片数组）

3. **保存为预制体**
   - 将 `Card` 节点拖拽到资源管理器的 `assets/prefabs/` 目录
   - 命名为 `CardPrefab`

### 2. 准备卡牌图片

1. **卡牌正面图片**
   - 需要 52 张图片（13 点数 x 4 花色）
   - 命名建议：`card_face_0_0.png`（点数_花色）
   - 导入到 `assets/resources/cards/faces/`

2. **卡牌背面图片**
   - 需要 1 张图片
   - 导入到 `assets/resources/cards/`

3. **配置 SpriteFrame**
   - 在 Cocos Creator 中选中图片
   - 在属性检查器中配置 SpriteFrame
   - 确保图片可以正常显示

### 3. 配置 CardView 的 SpriteFrame 数组

在 `CardPrefab` 的 `CardView` 组件中：

1. **设置 cardBackSpriteFrame**
   - 拖拽卡牌背面图片的 SpriteFrame

2. **设置 cardFaceSpriteFrames 数组**
   - 数组大小：52
   - 按照顺序添加：
     - 索引 0-3: ACE (A) 的 4 种花色
     - 索引 4-7: TWO (2) 的 4 种花色
     - ... 以此类推
     - 索引 48-51: KING (K) 的 4 种花色

## 四、运行项目

### 1. 设置启动场景

1. **打开构建设置**
   - 菜单：`项目` -> `构建设置`

2. **添加场景**
   - 点击"添加场景"
   - 选择 `GameScene` 场景
   - 确保它在场景列表的第一位

### 2. 运行预览

1. **点击预览按钮**
   - 点击编辑器顶部的"预览"按钮（或按 `Ctrl + P`）

2. **测试功能**
   - 测试卡牌匹配功能
   - 测试翻牌功能
   - 测试回退功能

### 3. 调试

如果遇到问题：

1. **查看控制台**
   - 打开"控制台"面板
   - 查看错误信息

2. **检查组件引用**
   - 确保所有 View 组件的引用都已正确配置
   - 确保预制体引用正确

3. **检查资源**
   - 确保所有图片资源都已正确导入
   - 确保 SpriteFrame 配置正确

## 五、常见问题

### Q1: 编译错误 "Cannot find module 'cc'"

**A**: 
- 确保使用的是 Cocos Creator 3.x 版本
- 检查 `tsconfig.json` 配置是否正确
- 尝试重新打开项目

### Q2: 卡牌不显示

**A**:
- 检查 `CardView` 组件的 SpriteFrame 引用
- 检查卡牌预制体是否正确配置
- 检查场景中节点的位置和大小

### Q3: 点击没有反应

**A**:
- 检查 `CardView` 的触摸事件是否正确设置
- 检查回调函数是否正确连接
- 检查 `GameController` 的引用是否正确

### Q4: 动画不播放

**A**:
- 检查 tween 是否正确导入
- 检查节点位置是否正确
- 检查动画参数是否正确

## 六、下一步

完成基础配置后，你可以：

1. **完善游戏逻辑**
   - 添加音效
   - 添加粒子特效
   - 优化动画效果

2. **扩展功能**
   - 添加关卡系统
   - 添加计分系统
   - 添加成就系统

3. **优化性能**
   - 使用对象池管理卡牌
   - 优化资源加载
   - 减少 DrawCall

4. **发布游戏**
   - 构建 Web 版本
   - 构建移动端版本
   - 上传到 GitHub

## 七、参考文档

- [Cocos Creator 官方文档](https://docs.cocos.com/creator/manual/zh/)
- [TypeScript 官方文档](https://www.typescriptlang.org/docs/)
- 项目内的 `README.md` 和 `开发文档.md`

